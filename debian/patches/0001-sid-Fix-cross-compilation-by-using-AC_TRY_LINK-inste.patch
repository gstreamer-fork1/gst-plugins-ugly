From 248f174c3ed1bdfea20fe580a035e35caa8bdf34 Mon Sep 17 00:00:00 2001
From: Helmut Grohne <helmut@subdivi.de>
Date: Thu, 17 Jan 2019 17:29:38 +0200
Subject: [PATCH] sid: Fix cross-compilation by using AC_TRY_LINK instead of
 AC_TRY_RUN

https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=917899
---
 m4/gst-sid.m4 | 8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)

diff --git a/m4/gst-sid.m4 b/m4/gst-sid.m4
index 8ae28772..3ba8a38c 100644
--- a/m4/gst-sid.m4
+++ b/m4/gst-sid.m4
@@ -16,13 +16,9 @@ if test $HAVE_SIDPLAY = "yes"; then
 
   LIBS="-lsidplay"
 
-  AC_TRY_RUN([
-    #include <sidplay/player.h>
-    int main()
-    { sidTune tune = sidTune(0);  }
-    ],
+  AC_TRY_LINK([#include <sidplay/player.h>],
+    [sidTune tune = sidTune(0);],
     HAVE_SIDPLAY="yes",
-    HAVE_SIDPLAY="no",
     HAVE_SIDPLAY="no")
 
   LIBS="$ac_libs_safe"
-- 
2.20.1

